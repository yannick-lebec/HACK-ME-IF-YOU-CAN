<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Explication â€“ Level 1 (SQL Injection)</title>
    <link rel="stylesheet" href="/style.css" />
  </head>
  <body>

    <div
      class="matrix-content"
      style="align-items:flex-start; text-align:left; max-width:800px;"
    >
      <h1>Level 1 â€“ SQL Injection Login</h1>
      <p class="subtitle">
        Ce niveau montre ce qu'il ne faut <strong>jamais</strong> faire avec des
        identifiants utilisateurs.
      </p>

      <h2>âš ï¸ Ce qui Ã©tait vulnÃ©rable</h2>
      <p>
        Dans le code du niveau 1, la requÃªte SQL Ã©tait construite ainsi :
      </p>
      <pre
        style="white-space:pre-wrap; background:rgba(15,23,42,0.9); padding:12px; border-radius:8px;"
      >const query = `SELECT * FROM users WHERE username='${username}' AND password='${password}'`;</pre>

      <p>
        On concatÃ¨ne directement les valeurs envoyÃ©es par l'utilisateur dans la
        requÃªte SQL. RÃ©sultat : un attaquant peut injecter du SQL, par exemple :
      </p>

      <pre
        style="white-space:pre-wrap; background:rgba(15,23,42,0.9); padding:12px; border-radius:8px;"
      >username = toto' OR '1'='1
password = peu importe</pre>

      <p>
        La requÃªte devient alors toujours vraie, ce qui permet de se connecter
        sans connaÃ®tre le vrai mot de passe.
      </p>

      <h2>ğŸ” Comment tu as exploitÃ© la vulnÃ©rabilitÃ©</h2>
      <ul>
        <li>Tu as essayÃ© des identifiants normaux â†’ Ã©chec.</li>
        <li>Tu as injectÃ© une apostrophe <code>'</code> pour â€œcasserâ€ la requÃªte.</li>
        <li>
          Puis tu as ajoutÃ© une condition toujours vraie comme
          <code>OR '1'='1'</code>.
        </li>
      </ul>

      <h2>âœ… Ce qu'il faudrait faire en vrai</h2>
      <ul>
        <li>Utiliser des requÃªtes <strong>prÃ©parÃ©es / paramÃ©trÃ©es</strong>.</li>
        <li>
          Ne <strong>jamais concatÃ©ner</strong> directement les donnÃ©es
          utilisateur dans le SQL.
        </li>
        <li>Stocker les mots de passe <strong>hachÃ©s</strong> (bcrypt, argon2...).</li>
      </ul>

      <p>Exemple correct :</p>
      <pre
        style="white-space:pre-wrap; background:rgba(15,23,42,0.9); padding:12px; border-radius:8px;"
      >const [rows] = await db.execute(
  "SELECT id, username, password FROM users WHERE username = ?",
  [username]
);</pre>

      <p style="margin-top:20px;">
        <a href="/game" class="btn btn-secondary">ğŸ  Retour au hub</a>
      </p>
    </div>

    
  </body>
</html>